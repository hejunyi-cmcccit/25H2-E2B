<mxfile host="Electron" modified="2025-11-27T09:17:44.261Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/23.1.5 Chrome/120.0.6099.109 Electron/28.1.0 Safari/537.36" etag="LKBGeFJBq1nYDaBdfwiw" version="23.1.5" type="device" pages="9">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Create流程">
    <mxGraphModel dx="734" dy="1708" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <object label="开始 Create 方法" code="&#x9;&#xa;childSpan.SetAttributes(&#xa;&#x9;&#x9;telemetry.WithTemplateID(req.GetSandbox().GetTemplateId()),&#xa;&#x9;&#x9;attribute.String(&quot;kernel.version&quot;, req.GetSandbox().GetKernelVersion()),&#xa;&#x9;&#x9;telemetry.WithSandboxID(req.GetSandbox().GetSandboxId()),&#xa;&#x9;&#x9;attribute.String(&quot;client.id&quot;, s.info.ClientId),&#xa;&#x9;&#x9;attribute.String(&quot;envd.version&quot;, req.GetSandbox().GetEnvdVersion()),&#xa;&#x9;)" id="NM-Ob7JPW5NZKxihxJca-2">
          <mxCell style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="724" y="-70" width="145" height="34" as="geometry" />
          </mxCell>
        </object>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-3" value="设置60秒超时" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="740" y="14" width="112" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-4" value="设置分布式追踪 span" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="714" y="153" width="164" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shape=flexArrow;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1490" y="288.3529411764706" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-5" value="配置 LaunchDarkly 上下文" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="696" y="271" width="201" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-6" value="(使用上下文)获取 MaxSandboxesPerNode 特性标志" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="655" y="354" width="283" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-7" value="检查运行中的沙箱数量&#xa;是否达到上限?" style="rhombus;strokeWidth=2;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="684" y="438" width="225" height="225" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-8" value="返回 ResourceExhausted 错误" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="20" y="2350" width="226" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-9" value="尝试获取1个启动槽位&#xa;(最多3个并发启动)" style="rhombus;strokeWidth=2;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="839" y="732" width="193" height="193" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-10" value="返回 ResourceExhausted 错误:&#xa;太多沙箱正在启动" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="296" y="2342" width="231" height="50" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-11" value="延迟释放启动槽位" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="993" y="993" width="143" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-12" value="从缓存获取模板&#xa;templateCache.GetTemplate" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="954" y="1076" width="222" height="50" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-13" value="返回错误: 获取模板失败" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="578" y="2350" width="186" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-14" value="克隆网络配置" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1117" y="1195" width="111" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-15" value="检查是否允许&#xa;互联网访问?" style="rhombus;strokeWidth=2;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1092" y="1278" width="161" height="161" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-98" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;shape=flexArrow;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-16" target="NM-Ob7JPW5NZKxihxJca-96" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-16" value="配置拒绝所有互联网流量&#xa;DeniedCidrs" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="748" y="1508" width="191" height="50" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-100" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shape=flexArrow;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-17" target="NM-Ob7JPW5NZKxihxJca-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="调用 sandboxFactory.ResumeSandbox&#xa;创建沙箱实例" id="NM-Ob7JPW5NZKxihxJca-17">
          <mxCell style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
            <mxGeometry x="1032" y="1626" width="282" height="50" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-18" value="上报关键错误" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="831" y="2251" width="112" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-19" value="返回 Internal 错误" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="814" y="2350" width="146" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-20" value="将沙箱插入缓存&#xa;sandboxes.Insert" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1198" y="1744" width="136" height="50" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-21" value="启动清理 goroutine" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1190" y="1843" width="152" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-22" value="确定事件类型" style="rhombus;strokeWidth=2;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1081" y="1946" width="145" height="145" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-23" value="SandboxResumedEvent" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="952" y="2159" width="178" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-24" value="SandboxCreatedEvent" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1180" y="2159" width="171" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-25" value="启动 goroutine&#xa;发布事件到事件服务&#xa;go s.sbxEventsService.Publish" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1055.5" y="2251" width="196" height="50" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-26" value="返回成功响应&#xa;包含 ClientId" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1098" y="2342" width="111" height="50" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-27" value="结束" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="643" y="2450" width="56" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-28" value="清理流程 goroutine" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1414" y="2001" width="152" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-29" value="sbx.Wait 等待沙箱结束" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1402" y="2159" width="177" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-30" value="sbx.Close 清理资源" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1414" y="2251" width="151" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-31" value="从缓存移除沙箱&#xa;RemoveByExecutionID" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1404" y="2342" width="172" height="50" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-32" value="从sandboxproxy的http连接池移除&#xa;proxy.RemoveFromPool" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1400" y="2442" width="181" height="50" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-33" value="记录日志: Sandbox killed" style="whiteSpace=wrap;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1393" y="2542" width="193" height="34" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-34" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4981602109711746;exitY=0.9873950060676125;entryX=0.5020824159894671;entryY=-0.012604993932387409;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-2" target="NM-Ob7JPW5NZKxihxJca-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-35" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5020824159894671;exitY=0.9747900121352252;entryX=0.5014221377489043;entryY=0.004201776841107537;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-3" target="NM-Ob7JPW5NZKxihxJca-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-36" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5014221377489043;exitY=0.9915967829087201;entryX=0.49867278900905626;entryY=-0.008403217091279872;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-4" target="NM-Ob7JPW5NZKxihxJca-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-37" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49867278900905626;exitY=0.9789917889763328;entryX=0.49905735191102585;entryY=0.008403553682215074;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-5" target="NM-Ob7JPW5NZKxihxJca-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-38" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49905735191102585;exitY=0.9957985597498277;entryX=0.4988143581814236;entryY=-0.0006348843044704861;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-6" target="NM-Ob7JPW5NZKxihxJca-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-39" value="是" style="curved=1;startArrow=none;endArrow=block;exitX=-0.0016195000542534722;exitY=0.6106486839765239;entryX=0.5005515782179031;entryY=0.013165866627412684;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-7" target="NM-Ob7JPW5NZKxihxJca-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="133" y="697" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-40" value="否" style="curved=1;startArrow=none;endArrow=block;exitX=0.9738440780245259;exitY=1.0002328321668836;entryX=0.5008297658337213;entryY=-0.0019491324152971178;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-7" target="NM-Ob7JPW5NZKxihxJca-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="936" y="697" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-41" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.0015329746384694786;exitY=0.6219140293343203;entryX=0.5020713641013934;entryY=0.008952789306640625;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-9" target="NM-Ob7JPW5NZKxihxJca-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="412" y="959" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-42" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.9950610707568525;exitY=0.9966444499752064;entryX=0.5033892651537916;entryY=-0.0022409102495978862;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-9" target="NM-Ob7JPW5NZKxihxJca-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1065" y="959" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-43" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5033892651537916;exitY=0.9851540958180147;entryX=0.49993092304951436;entryY=0.00990478515625;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-11" target="NM-Ob7JPW5NZKxihxJca-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-44" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.00004484846785261824;exitY=0.8380809139814164;entryX=0.49799744800854756;entryY=0.013165866627412684;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-12" target="NM-Ob7JPW5NZKxihxJca-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="671" y="1160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-45" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7038022743030246;exitY=1.0013333892822265;entryX=0.5031605626011754;entryY=-0.010644127340877758;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-12" target="NM-Ob7JPW5NZKxihxJca-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1173" y="1160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-46" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5031605626011754;exitY=0.9767508787267348;entryX=0.5021790214206862;entryY=0.0013014278056458657;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-14" target="NM-Ob7JPW5NZKxihxJca-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-47" value="否" style="curved=1;startArrow=none;endArrow=block;exitX=0.0029923812202785325;exitY=0.6744142187487372;entryX=0.5014628065818267;entryY=-0.00961883544921875;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-15" target="NM-Ob7JPW5NZKxihxJca-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="844" y="1473" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-48" value="是" style="curved=1;startArrow=none;endArrow=block;exitX=0.8045624467017505;exitY=0.9996747082064611;entryX=0.60280946347779;entryY=-0.006761627197265625;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-15" target="NM-Ob7JPW5NZKxihxJca-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1242" y="1473" />
              <mxPoint x="1242" y="1591" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-49" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5014628065818267;exitY=0.9818097686767578;entryX=0.009844368698148831;entryY=-0.006761627197265625;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-16" target="NM-Ob7JPW5NZKxihxJca-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="844" y="1591" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-50" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.0731999745491613;exitY=0.984666976928711;entryX=0.4942842892238072;entryY=-0.0036409041460822612;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-17" target="NM-Ob7JPW5NZKxihxJca-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="886" y="1710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-51" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4942842892238072;exitY=0.9837541019215303;entryX=0.4956153451579891;entryY=0.013165866627412684;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-18" target="NM-Ob7JPW5NZKxihxJca-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-52" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.6375750439967567;exitY=0.984666976928711;entryX=0.49756381090949564;entryY=-0.0039044189453125;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-17" target="NM-Ob7JPW5NZKxihxJca-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1266" y="1710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-53" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49756381090949564;exitY=0.9875241851806641;entryX=0.49782025186639084;entryY=0.011064978206858915;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-20" target="NM-Ob7JPW5NZKxihxJca-21" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-54" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.2552860177067194;exitY=0.9984599842744715;entryX=0.5000299124882139;entryY=-0.003316760885304418;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-21" target="NM-Ob7JPW5NZKxihxJca-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1154" y="1911" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-55" value="snapshot=true" style="curved=1;startArrow=none;endArrow=block;exitX=-0.0007089812180091595;exitY=0.9739126049525049;entryX=0.500964861237601;entryY=0.008964089786305147;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-22" target="NM-Ob7JPW5NZKxihxJca-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1041" y="2125" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-56" value="snapshot=false" style="curved=1;startArrow=none;endArrow=block;exitX=1.0007688061944369;exitY=0.9739126049525049;entryX=0.5019703469081231;entryY=0.008964089786305147;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-22" target="NM-Ob7JPW5NZKxihxJca-24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1266" y="2125" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-57" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.500964861237601;exitY=0.9963590958539177;entryX=0.14737368214167645;entryY=-0.0024758148193359374;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-23" target="NM-Ob7JPW5NZKxihxJca-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1041" y="2218" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-58" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5019703469081231;exitY=0.9963590958539177;entryX=0.8464305342432112;entryY=-0.0024758148193359374;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-24" target="NM-Ob7JPW5NZKxihxJca-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1266" y="2218" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-59" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49690210819244385;exitY=0.9889527893066407;entryX=0.5000390748719912;entryY=0.008952789306640625;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-25" target="NM-Ob7JPW5NZKxihxJca-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-60" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5000390748719912;exitY=1.0003813934326171;entryX=0.9895859105246407;entryY=0.40998956500877337;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-26" target="NM-Ob7JPW5NZKxihxJca-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1154" y="2417" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-61" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5005515782179031;exitY=1.0005608726950252;entryX=-0.002888577325003488;entryY=0.4185537478224299;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-8" target="NM-Ob7JPW5NZKxihxJca-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="133" y="2417" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-62" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5020713641013934;exitY=1.0003813934326171;entryX=-0.002888577325003488;entryY=0.33693533043548785;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-10" target="NM-Ob7JPW5NZKxihxJca-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="412" y="2417" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-63" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49799744800854756;exitY=1.0005608726950252;entryX=0.49334866659981863;entryY=0.0005608726950252757;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-13" target="NM-Ob7JPW5NZKxihxJca-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-64" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4956153451579891;exitY=1.0005608726950252;entryX=0.9895859105246407;entryY=0.305638257977909;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-19" target="NM-Ob7JPW5NZKxihxJca-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="886" y="2417" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-65" value="" style="curved=1;dashed=1;dashPattern=2 3;startArrow=none;endArrow=block;exitX=0.9832525313238929;exitY=0.9984599842744715;entryX=0.5010895478098016;entryY=0.010014533996582031;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-21" target="NM-Ob7JPW5NZKxihxJca-28" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1490" y="1911" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-66" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5010895478098016;exitY=0.9974095400641946;entryX=0.49811079811915165;entryY=0.008964089786305147;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-28" target="NM-Ob7JPW5NZKxihxJca-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-67" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49811079811915165;exitY=0.9963590958539177;entryX=0.5044080216363566;entryY=-0.0036409041460822612;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-29" target="NM-Ob7JPW5NZKxihxJca-30" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-68" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5044080216363566;exitY=0.9837541019215303;entryX=0.5009628562040107;entryY=0.008952789306640625;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-30" target="NM-Ob7JPW5NZKxihxJca-31" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-69" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5009628562040107;exitY=1.0003813934326171;entryX=0.49815254843696044;entryY=0.0003813934326171875;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-31" target="NM-Ob7JPW5NZKxihxJca-32" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-70" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49815254843696044;exitY=0.9918099975585938;entryX=0.5034487630419163;entryY=-0.012044121237362133;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="NM-Ob7JPW5NZKxihxJca-32" target="NM-Ob7JPW5NZKxihxJca-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-77" value="&lt;div style=&quot;color: rgb(228, 228, 228); background-color: rgb(24, 24, 24); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;font-style: italic;&quot;&gt;// set max request timeout for this request&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ctx&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;cancel&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;:=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;context&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;WithTimeoutCause&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ctx&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;requestTimeout&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;fmt&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Errorf&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e394dc;&quot;&gt;&quot;request timed out&quot;&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;))&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;defer&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;cancel&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="880" y="-10" width="560" height="100" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-80" value="&lt;div style=&quot;color: rgb(228, 228, 228); background-color: rgb(24, 24, 24); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;// 创建当前包的tracer&lt;/div&gt;&lt;div&gt;var &lt;span style=&quot;color: #d6d6dd;&quot;&gt;tracer&lt;/span&gt; &lt;span style=&quot;color: #efb080;&quot;&gt;=&lt;/span&gt; &lt;span style=&quot;color: #d6d6dd;&quot;&gt;otel&lt;/span&gt;.&lt;span style=&quot;color: #efb080;&quot;&gt;Tracer&lt;/span&gt;(&lt;span style=&quot;color: #e394dc;&quot;&gt;&quot;github.com/e2b-dev/infra/packages/orchestrator/internal/server&quot;&lt;/span&gt;)&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;// set up tracing&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ctx&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;childSpan&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;:=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;tracer&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Start&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ctx&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #e394dc;&quot;&gt;&quot;sandbox-create&quot;&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;// 设置span指标&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;childSpan.&lt;span style=&quot;color: #efb080;&quot;&gt;SetAttributes&lt;/span&gt;(...&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="909" y="90" width="430" height="80" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-83" value="&lt;div style=&quot;color: rgb(228, 228, 228); background-color: rgb(24, 24, 24); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;maxRunningSandboxesPerNode&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;err&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;:=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;featureFlags&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;IntFlag&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ctx&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;featureflags&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;MaxSandboxesPerNode&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="960" y="378" width="560" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-84" value="&lt;div style=&quot;color: rgb(228, 228, 228); background-color: rgb(24, 24, 24); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;font-style: italic;&quot;&gt;// setup launch darkly&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ctx&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;featureflags&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SetContext&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ctx&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ldcontext&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;NewBuilder&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandboxId&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;()).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Kind&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;featureflags&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;SandboxKind&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SetString&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;featureflags&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;SandboxTemplateAttribute&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetTemplateId&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;()).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SetString&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;featureflags&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;SandboxKernelVersionAttribute&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetKernelVersion&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;()).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SetString&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;featureflags&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;SandboxFirecrackerVersionAttribute&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetFirecrackerVersion&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;()).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Build&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ldcontext&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;NewBuilder&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetTeamId&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;()).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Kind&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;featureflags&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;TeamKind&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;).&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Build&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; )&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1460" y="48" width="560" height="350" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-87" value="&lt;div style=&quot;color: rgb(228, 228, 228); background-color: rgb(24, 24, 24); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;runningSandboxes&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;:=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;sandboxes&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Count&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;()&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;runningSandboxes&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;maxRunningSandboxesPerNode&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="933.5" y="525" width="440" height="60" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-90" value="&lt;div style=&quot;color: rgb(228, 228, 228); background-color: rgb(24, 24, 24); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;acquired&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;:=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;startingSandboxes&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;TryAcquire&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ebc88d;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1050" y="808.5" width="410" height="40" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-92" value="&lt;div style=&quot;color: rgb(228, 228, 228); background-color: rgb(24, 24, 24); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;template&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;err&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;:=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;templateCache&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetTemplate&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ctx&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetBuildId&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetKernelVersion&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetFirecrackerVersion&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSnapshot&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; false,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; )&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1206" y="1000" width="380" height="180" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-93" value="&lt;div style=&quot;color: rgb(228, 228, 228); background-color: rgb(24, 24, 24); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;allowInternet&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;:=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;config&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;AllowSandboxInternet&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;AllowInternetAccess&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;!=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; nil {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;allowInternet&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetAllowInternetAccess&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;()&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; }&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;!allowInternet&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1250" y="1310" width="530" height="120" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-96" value="&lt;div style=&quot;color: rgb(228, 228, 228); background-color: rgb(24, 24, 24); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;network&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;==&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; nil {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;network&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;orchestrator&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SandboxNetworkConfig&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;{}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;network&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetEgress&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;() &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;==&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; nil {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;network&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;Egress&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;orchestrator&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SandboxNetworkEgressConfig&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;{}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;network&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;Egress&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;DeniedCidrs&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; []&lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;string&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;{&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;sandbox_network&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;AllInternetTrafficCIDR&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="279" y="1290" width="560" height="190" as="geometry" />
        </mxCell>
        <mxCell id="NM-Ob7JPW5NZKxihxJca-99" value="&lt;div style=&quot;color: rgb(228, 228, 228); background-color: rgb(24, 24, 24); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;sbx&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;err&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;:=&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;sandboxFactory&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;ResumeSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;ctx&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;template&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;sandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Config&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;BaseTemplateID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetBaseTemplateId&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;Vcpu&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetVcpu&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;RamMB&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetRamMb&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;TotalDiskSizeMB&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetTotalDiskSizeMb&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;HugePages&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetHugePages&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;Network&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;network&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;Envd&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;sandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;EnvdMetadata&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;Version&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetEnvdVersion&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;AccessToken&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;EnvdAccessToken&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;Vars&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetEnvVars&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; },&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; },&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;sandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;RuntimeMetadata&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;TemplateID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetTemplateId&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;SandboxID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandboxId&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;ExecutionID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetExecutionId&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaa0fa;&quot;&gt;TeamID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;: &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetTeamId&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; },&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetStartTime&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;AsTime&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetEndTime&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;().&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;AsTime&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;req&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandbox&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; )&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1830" y="1220" width="560" height="570" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="csZ9Pl_uyePfn9zzLrhn" name="Update流程">
    <mxGraphModel dx="864" dy="634" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-1" value="开始 Update 方法&#xa;第219行" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="244" y="570" width="153" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-25" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="Nj-mBoGiBG6RdpyqHGK6-5" target="Nj-mBoGiBG6RdpyqHGK6-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-28" value="存在" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="Nj-mBoGiBG6RdpyqHGK6-25">
          <mxGeometry x="0.1181" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-5" value="检查沙箱是否存在于缓存 (229行)&#xa;sbx, ok := s.sandboxes.Get&#xa;(req.GetSandboxId())&#xa;if !ok" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="196" y="650" width="250" height="130" as="geometry" />
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-6" value="上报关键错误 (230行)&#xa;telemetry.ReportCriticalError&#xa;(ctx, &#39;sandbox not found&#39;, nil)" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="360" y="840" width="200" height="66" as="geometry" />
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-7" value="返回错误 (232行)&#xa;status.Error(codes.NotFound,&#xa;&#39;sandbox not found&#39;)" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="360" y="960" width="200" height="66" as="geometry" />
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="Nj-mBoGiBG6RdpyqHGK6-8" target="Nj-mBoGiBG6RdpyqHGK6-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-8" value="更新结束时间 (235行)&#xa;sbx.EndAt = req.GetEndTime()&#xa;.AsTime()" style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="79" y="840" width="241" height="66" as="geometry" />
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-10" value="准备并发布更新事件 (241-257行)&#xa;go s.sbxEventsService.Publish" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="80" y="980" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-11" value="返回成功 (259行)&#xa;return &amp;amp;emptypb.Empty{}, nil" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="80" y="1090" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-12" value="结束" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="330" y="1180" width="56" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-13" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5022102056765089;exitY=0.9914286041259766;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="Nj-mBoGiBG6RdpyqHGK6-1" target="Nj-mBoGiBG6RdpyqHGK6-5">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
            <mxPoint x="320.6102326908267" y="690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-18" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4981367735736138;exitY=0.9910041924678918;entryX=0.5025615523346757;entryY=0.0061557076194069605;rounded=0;" edge="1" parent="1" source="Nj-mBoGiBG6RdpyqHGK6-6" target="Nj-mBoGiBG6RdpyqHGK6-7">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-22" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49860696231617646;exitY=0.9971727462041946;entryX=0.4984921801849251;entryY=0.008125495910644532;rounded=0;" edge="1" parent="1" source="Nj-mBoGiBG6RdpyqHGK6-10" target="Nj-mBoGiBG6RdpyqHGK6-11">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-23" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4984921801849251;exitY=0.999554100036621;entryX=0.0008727822984967913;entryY=0.27089631847331264;rounded=0;" edge="1" parent="1" source="Nj-mBoGiBG6RdpyqHGK6-11" target="Nj-mBoGiBG6RdpyqHGK6-12">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="220" y="1210" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-24" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5025615523346757;exitY=0.9996621680982185;entryX=0.9933472701481411;entryY=0.27089631847331264;rounded=0;" edge="1" parent="1" source="Nj-mBoGiBG6RdpyqHGK6-7" target="Nj-mBoGiBG6RdpyqHGK6-12">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="480" y="1150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-27" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="Nj-mBoGiBG6RdpyqHGK6-5" target="Nj-mBoGiBG6RdpyqHGK6-6">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="470" y="810" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Nj-mBoGiBG6RdpyqHGK6-29" value="不存在" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="Nj-mBoGiBG6RdpyqHGK6-27">
          <mxGeometry x="-0.3126" relative="1" as="geometry">
            <mxPoint y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="57OfrJ2rKpUF3aSPQHUL" name="Delete流程">
    <mxGraphModel dx="734" dy="539" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="P_N4wdPgNFK7fuaE3uTy-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="eGfiHjRL028-4ai16Hbu-1" target="P_N4wdPgNFK7fuaE3uTy-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eGfiHjRL028-4ai16Hbu-1" value="从缓存移除沙箱 &#xa;s.sandboxes.Remove" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="180" y="760" width="200" height="66" as="geometry" />
        </mxCell>
        <mxCell id="0nSHbEDLS-gMD4nqMiji-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="P_N4wdPgNFK7fuaE3uTy-3" target="0nSHbEDLS-gMD4nqMiji-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="P_N4wdPgNFK7fuaE3uTy-3" value="健康检查 &#xa;sbx.Checks.Healthcheck" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="180" y="870" width="200" height="66" as="geometry" />
        </mxCell>
        <mxCell id="fqeFCq3Tx_Ey1PIS7YZl-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="SePo-NOJ7tRtysm-3Rr5-1" target="fqeFCq3Tx_Ey1PIS7YZl-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SePo-NOJ7tRtysm-3Rr5-1" value="准备并发布更新事件" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="1110" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="fqeFCq3Tx_Ey1PIS7YZl-1" value="结束" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="80" y="1230" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yEIPgWIYDmF3NY2nt4n4-1" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="0nSHbEDLS-gMD4nqMiji-1" target="SePo-NOJ7tRtysm-3Rr5-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yEIPgWIYDmF3NY2nt4n4-2" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="0nSHbEDLS-gMD4nqMiji-1" target="FQ_joBZ4W6loIG0X3-Nf-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0nSHbEDLS-gMD4nqMiji-1" value="启动 goroutine" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="224.75" y="970" width="110.5" height="50" as="geometry" />
        </mxCell>
        <UserObject label="停止沙箱&#xa;sbx.Stop&#xa;（调用Process.stop）" link="data:page/id,HfmUvK3DLXnTJlrBy4ud" id="FQ_joBZ4W6loIG0X3-Nf-1">
          <mxCell style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
            <mxGeometry x="360" y="1090" width="150" height="50" as="geometry" />
          </mxCell>
        </UserObject>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="vmI1x24WJg8pxzO4gYff" name="Pause流程">
    <mxGraphModel dx="734" dy="539" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-1" value="开始 Pause 方法" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="547" y="20" width="138" height="34" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-2" value="设置追踪&#xa;tracer.Start(&#39;sandbox-pause&#39;)" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="506" y="104" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-3" value="配置特性标志&#xa;featureflags.SetContext()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="517" y="203" width="198" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-4" value="加锁&#xa;s.pauseMu.Lock()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="546" y="303" width="139" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-5" value="从缓存获取沙箱&#xa;s.sandboxes.Get()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="544" y="402" width="144" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-6" value="解锁&#xa;s.pauseMu.Unlock()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="61" y="1609" width="155" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-7" value="上报错误&#xa;telemetry.ReportCriticalError()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="20" y="1709" width="237" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-8" value="返回 NotFound 错误" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="1808" width="158" height="34" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-9" value="从缓存移除&#xa;s.sandboxes.Remove()" style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="625" y="520" width="174" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-10" value="解锁&#xa;s.pauseMu.Unlock()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="635" y="620" width="155" height="50" as="geometry" />
        </mxCell>
        <UserObject label="延迟停止清理&#xa;defer + go sbx.Stop()" link="data:page/id,HfmUvK3DLXnTJlrBy4ud" id="VTnYjCJ0KA3FLAC3VP3S-11">
          <mxCell style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
            <mxGeometry x="630" y="720" width="165" height="50" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-12" value="获取模板元数据&#xa;sbx.Template.Metadata()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="614" y="819" width="196" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-13" value="返回元数据错误" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="267" y="1808" width="128" height="34" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-14" value="获取 FC 版本&#xa;sbx.FirecrackerVersions()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="708" y="937" width="196" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-15" value="更新元数据版本&#xa;meta.SameVersionTemplate()" style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="693" y="1055" width="226" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-16" value="创建快照&#xa;sbx.Pause()" style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="757" y="1155" width="97" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-17" value="上报快照错误&#xa;telemetry.ReportCriticalError()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="399" y="1709" width="237" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-18" value="返回 Internal 错误" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="445" y="1808" width="146" height="34" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-19" value="添加到模板缓存&#xa;s.templateCache.AddSnapshot()" style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="827" y="1273" width="245" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-20" value="上报缓存错误&#xa;telemetry.ReportCriticalError()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="687" y="1709" width="237" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-21" value="返回 Internal 错误" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="732" y="1808" width="146" height="34" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-22" value="上报成功事件&#xa;telemetry.ReportEvent()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="999" y="1391" width="189" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-23" value="启动上传 goroutine&#xa;go snapshot.Upload()" style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1010" y="1509" width="167" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-24" value="准备事件数据&#xa;s.prepareSandboxEventData()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="979" y="1609" width="228" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-25" value="发布暂停事件&#xa;go s.sbxEventsService.Publish()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="974" y="1709" width="239" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-26" value="返回成功" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1054" y="1808" width="79" height="34" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-27" value="结束" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="490" y="1892" width="56" height="34" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-28" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4994596398395041;exitY=0.9873950060676125;entryX=0.4996610468084162;entryY=-0.008571395874023438;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-1" target="VTnYjCJ0KA3FLAC3VP3S-2">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-29" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4996610468084162;exitY=0.9828572082519531;entryX=0.49962338534268463;entryY=0.002857208251953125;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-2" target="VTnYjCJ0KA3FLAC3VP3S-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-30" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49962338534268463;exitY=0.9942858123779297;entryX=0.5030606496248314;entryY=-0.005714187622070313;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-3" target="VTnYjCJ0KA3FLAC3VP3S-4">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-31" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5030606496248314;exitY=0.9857144165039062;entryX=0.4994821548461914;entryY=0.00571441650390625;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-4" target="VTnYjCJ0KA3FLAC3VP3S-5">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-32" value="未找到" style="curved=1;startArrow=none;endArrow=block;exitX=-0.0008382267422146267;exitY=0.6797422798294668;entryX=0.5005088560042843;entryY=6.866455078125e-7;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-5" target="VTnYjCJ0KA3FLAC3VP3S-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="139" y="486" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-33" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5005088560042843;exitY=0.9914292907714843;entryX=0.5003327961209454;entryY=-0.008570709228515626;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-6" target="VTnYjCJ0KA3FLAC3VP3S-7">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-34" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5003327961209454;exitY=0.9828578948974609;entryX=0.4973346372193928;entryY=0.004202786613913143;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-7" target="VTnYjCJ0KA3FLAC3VP3S-8">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-35" value="找到" style="curved=1;startArrow=none;endArrow=block;exitX=0.7802506670838909;exitY=0.9971430206298828;entryX=0.5016278234021417;entryY=0.008571624755859375;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-5" target="VTnYjCJ0KA3FLAC3VP3S-9">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="712" y="486" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-36" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5016278234021417;exitY=1.000000228881836;entryX=0.49860155659337196;entryY=2.288818359375e-7;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-9" target="VTnYjCJ0KA3FLAC3VP3S-10">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-37" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49860155659337196;exitY=0.9914288330078125;entryX=0.4986863107392282;entryY=-0.0085711669921875;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-10" target="VTnYjCJ0KA3FLAC3VP3S-11">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-38" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4986863107392282;exitY=0.982857437133789;entryX=0.5014451085304727;entryY=0.0028574371337890623;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-11" target="VTnYjCJ0KA3FLAC3VP3S-12">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-39" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.002344754277443399;exitY=0.801918444966243;entryX=0.5023007392883301;entryY=0.004202786613913143;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-12" target="VTnYjCJ0KA3FLAC3VP3S-13">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="331" y="903" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-40" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7012116864023156;exitY=0.9942860412597656;entryX=0.4979540182619679;entryY=0.005714645385742187;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-12" target="VTnYjCJ0KA3FLAC3VP3S-14">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="806" y="903" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-41" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4979540182619679;exitY=0.9971432495117187;entryX=0.49822560875816685;entryY=0.008571853637695312;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-14" target="VTnYjCJ0KA3FLAC3VP3S-15">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-42" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49822560875816685;exitY=1.0000004577636719;entryX=0.5010204905087186;entryY=4.57763671875e-7;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-15" target="VTnYjCJ0KA3FLAC3VP3S-16">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-43" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.003429019574037532;exitY=0.6939373015173942;entryX=0.5017974145301787;entryY=-0.008570709228515626;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-16" target="VTnYjCJ0KA3FLAC3VP3S-17">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="518" y="1239" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-44" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5017974145301787;exitY=0.9828578948974609;entryX=0.4994930633126873;entryY=0.004202786613913143;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-17" target="VTnYjCJ0KA3FLAC3VP3S-18">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-45" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.9986119614433997;exitY=0.8928711954337814;entryX=0.4986851439184072;entryY=0.002857666015625;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-16" target="VTnYjCJ0KA3FLAC3VP3S-19">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="949" y="1239" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-46" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.25190843655964645;exitY=0.9942862701416015;entryX=0.4982435974893691;entryY=-0.008570709228515626;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-19" target="VTnYjCJ0KA3FLAC3VP3S-20">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="805" y="1357" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-47" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4982435974893691;exitY=0.9828578948974609;entryX=0.500573510993017;entryY=0.004202786613913143;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-20" target="VTnYjCJ0KA3FLAC3VP3S-21">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-48" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.745461851277168;exitY=0.9942862701416015;entryX=0.49879358685205855;entryY=0.005714874267578125;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-19" target="VTnYjCJ0KA3FLAC3VP3S-22">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1093" y="1357" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-49" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49879358685205855;exitY=0.9971434783935547;entryX=0.4986346581738866;entryY=0.00857208251953125;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-22" target="VTnYjCJ0KA3FLAC3VP3S-23">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-50" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4986346581738866;exitY=1.0000006866455078;entryX=0.5011929294519257;entryY=6.866455078125e-7;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-23" target="VTnYjCJ0KA3FLAC3VP3S-24">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-51" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5011929294519257;exitY=0.9914292907714843;entryX=0.4990459745399124;entryY=-0.008570709228515626;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-24" target="VTnYjCJ0KA3FLAC3VP3S-25">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-52" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4990459745399124;exitY=0.9828578948974609;entryX=0.49711377107644383;entryY=0.004202786613913143;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-25" target="VTnYjCJ0KA3FLAC3VP3S-26">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-53" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49711377107644383;exitY=0.9915977926815257;entryX=0.9949155875614711;entryY=0.42593484273445753;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-26" target="VTnYjCJ0KA3FLAC3VP3S-27">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1093" y="1867" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-54" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4973346372193928;exitY=0.9915977926815257;entryX=0.0024410997118268695;entryY=0.3952648251793107;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-8" target="VTnYjCJ0KA3FLAC3VP3S-27">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="139" y="1867" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-55" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5023007392883301;exitY=0.9915977926815257;entryX=0.0024410997118268695;entryY=0.30229938895757535;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-13" target="VTnYjCJ0KA3FLAC3VP3S-27">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="331" y="1867" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-56" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4994930633126873;exitY=0.9915977926815257;entryX=0.498678343636649;entryY=-0.008402207318474264;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-18" target="VTnYjCJ0KA3FLAC3VP3S-27">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-57" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.500573510993017;exitY=0.9915977926815257;entryX=0.9949155875614711;entryY=0.36636136559404936;rounded=0;" edge="1" parent="1" source="VTnYjCJ0KA3FLAC3VP3S-21" target="VTnYjCJ0KA3FLAC3VP3S-27">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="805" y="1867" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-58" value="调用fc api&lt;br&gt;先Pause再CreateSnapshot" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="890" y="1165" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VTnYjCJ0KA3FLAC3VP3S-59" value="比较MemfileDiff和RootfsDiff，&lt;br&gt;上传桶或本地存储" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1213" y="1519" width="187" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="List流程" id="p_Hq-bwrVjwMTNb7M6ln">
    <mxGraphModel dx="734" dy="539" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="6qo-ihK810VecGOpHuuV-0" />
        <mxCell id="6qo-ihK810VecGOpHuuV-1" parent="6qo-ihK810VecGOpHuuV-0" />
        <mxCell id="MOfMgSmqlJcYWxP2QAHL-0" value="从缓存读取&lt;br&gt;items := s.sandboxes.Items()" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="6qo-ihK810VecGOpHuuV-1">
          <mxGeometry x="160" y="350" width="200" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="HfmUvK3DLXnTJlrBy4ud" name="Process.Stop">
    <mxGraphModel dx="1835" dy="1348" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="BtYslM8ire2YECF74fz1-2" value="开始 Stop 方法&#xa;第432行" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="467" y="190" width="133" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-3" value="检查进程 (433-435行)&#xa;if p.cmd.Process == nil" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="420" y="290" width="228" height="228" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-4" value="返回错误&#xa;&#39;fc process not started&#39;" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="100" y="1915" width="177" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-5" value="防止上下文取消 (438行)&#xa;ctx = context.WithoutCancel(ctx)&#xa;&lt;i&gt;确保停止流程不会被取消&lt;/i&gt;" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="544" y="586" width="255" height="66" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-6" value="获取进程状态 (440行)&#xa;state, err := getProcessState&#xa;(ctx, p.cmd.Process.Pid)" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="561" y="701" width="221" height="66" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-7" value="记录警告 (442行)&#xa;Warn: &#39;failed to get&#xa;fc process state&#39;" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="323" y="1181" width="154" height="66" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-8" value="检查是否 D 状态 (443-445行)&#xa;if state == &#39;D&#39;" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="662" y="835" width="269" height="269" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-9" value="记录信息 (444行)&#xa;Info: &#39;fc process is in the D state&#xa;before we call SIGTERM&#39;&#xa;&lt;i&gt;D状态=不可中断睡眠&lt;/i&gt;" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="583" y="1173" width="246" height="82" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-10" value="发送终止信号 (447行)&#xa;err = p.cmd.Process&#xa;.Signal(syscall.SIGTERM)&#xa;&lt;i&gt;优雅关闭信号&lt;/i&gt;" style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="562" y="1323" width="189" height="82" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-11" value="检查信号发送结果" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="568" y="1455" width="177" height="177" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-12" value="记录警告 (449行)&#xa;Warn: &#39;failed to send SIGTERM&#xa;to fc process&#39;" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="360" y="1700" width="230" height="66" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-13" value="启动超时 goroutine (452-474行)&#xa;go func() { ... }()" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="536" y="1815" width="241" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-14" value="返回 nil (476行)&#xa;&lt;i&gt;主函数返回，清理继续在后台&lt;/i&gt;" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="395" y="1915" width="274" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-15" value="结束主流程" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="266" y="2122" width="104" height="34" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-16" value="后台 goroutine 开始" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="719" y="1923" width="157" height="34" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-17" value="select 等待 (453-473行)&#xa;1. 10秒超时&#xa;2. 进程退出" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="673" y="2015" width="249" height="249" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-18" value="发送 SIGKILL (456行)&#xa;err := p.cmd.Process.Kill()&#xa;&lt;i&gt;强制杀死进程&lt;/i&gt;" style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="579" y="2332" width="204" height="66" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-19" value="检查 SIGKILL 结果" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="594" y="2448" width="175" height="175" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-20" value="记录警告 (458行)&#xa;Warn: &#39;failed to send SIGKILL&#xa;to fc process&#39;" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="438" y="2699" width="222" height="66" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-21" value="记录信息 (460行)&#xa;Info: &#39;sent SIGKILL because&#xa;not responding to SIGTERM&#xa;for 10 seconds&#39;" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="710" y="2691" width="208" height="82" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-22" value="再次获取进程状态 (463行)&#xa;state, err := getProcessState&#xa;(ctx, p.cmd.Process.Pid)" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="571" y="2822" width="220" height="66" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-23" value="记录警告 (465行)&#xa;Warn: &#39;failed to get fc&#xa;process state after SIGKILL&#39;" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="354" y="3302" width="210" height="66" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-24" value="检查是否 D 状态 (466-468行)&#xa;if state == &#39;D&#39;" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="686" y="2957" width="269" height="269" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-25" value="记录信息 (467行)&#xa;Info: &#39;fc process is in the D state&#xa;after we call SIGKILL&#39;&#xa;&lt;i&gt;可能表示内核问题&lt;/i&gt;" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="614" y="3294" width="246" height="82" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-26" value="Goroutine 结束" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="620" y="3426" width="123" height="34" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-27" value="直接返回 (471-472行)&#xa;case &amp;lt;-p.Exit.Done():&#xa;  return" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="833" y="2332" width="187" height="66" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-28" value="Goroutine 结束" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="865" y="2518" width="123" height="34" as="geometry" />
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-29" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49901274272373747;exitY=0.9914286041259766;entryX=0.4972311174660398;entryY=-0.0018796920776367188;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-2" target="BtYslM8ire2YECF74fz1-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-30" value="是 nil" style="curved=1;startArrow=none;endArrow=block;exitX=-0.001956318554125334;exitY=0.7116122742916526;entryX=0.49939469159659694;entryY=-0.0006363677978515625;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-3" target="BtYslM8ire2YECF74fz1-4">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="188" y="551" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-31" value="进程存在" style="curved=1;startArrow=none;endArrow=block;exitX=0.9613532787237264;exitY=0.9964951799626935;entryX=0.498297539879294;entryY=-0.003449526700106534;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-3" target="BtYslM8ire2YECF74fz1-5">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="671" y="551" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-32" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.498297539879294;exitY=0.9900569337787051;entryX=0.4980356229376469;entryY=0.00520844893022017;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-5" target="BtYslM8ire2YECF74fz1-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-33" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=-0.0012338539054490862;exitY=0.9155148751882386;entryX=0.4995351302159297;entryY=-0.0028630458947383995;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-6" target="BtYslM8ire2YECF74fz1-7">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="400" y="801" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-34" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7744793072540852;exitY=0.9987149094090317;entryX=0.5;entryY=0;rounded=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-6" target="BtYslM8ire2YECF74fz1-8">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="796" y="801" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-35" value="是 D 状态" style="curved=1;startArrow=none;endArrow=block;exitX=0.2304991095047081;exitY=1.0008907247210082;entryX=0.4984644312199538;entryY=-0.0023044493140243903;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-8" target="BtYslM8ire2YECF74fz1-9">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="706" y="1139" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-36" value="否" style="curved=1;startArrow=none;endArrow=block;exitX=0.7420650268085052;exitY=1.0008907247210082;entryX=0.9987738876746445;entryY=0.10759038059831721;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-8" target="BtYslM8ire2YECF74fz1-10">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="878" y="1139" />
              <mxPoint x="878" y="1289" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-37" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4995351302159297;exitY=0.9906434145840731;entryX=0.0002933885685350529;entryY=0.16002395522751037;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-7" target="BtYslM8ire2YECF74fz1-10">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="400" y="1289" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-38" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4984644312199538;exitY=0.9924691363078791;entryX=0.6409919351059582;entryY=-0.0005622026396960747;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-9" target="BtYslM8ire2YECF74fz1-10">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="706" y="1289" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-39" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4995336381215898;exitY=0.9942113829822075;entryX=0.49950202036712127;entryY=-0.002681732177734375;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-10" target="BtYslM8ire2YECF74fz1-11">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-40" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.00026879606947387004;exitY=0.8352203413547732;entryX=0.5026650656824526;entryY=-0.00264659072413589;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-11" target="BtYslM8ire2YECF74fz1-12">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="476" y="1666" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-41" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.838140983465629;exitY=0.9957847164175605;entryX=0.6714965737645028;entryY=0.007935028076171875;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-11" target="BtYslM8ire2YECF74fz1-13">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="740" y="1666" />
              <mxPoint x="740" y="1790" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-42" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5026650656824526;exitY=0.9908598697546757;entryX=0.1261473178760625;entryY=0.007935028076171875;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-12" target="BtYslM8ire2YECF74fz1-13">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="476" y="1790" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-43" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.24311661974332774;exitY=0.9993636322021484;entryX=0.5008608825015326;entryY=-0.0006363677978515625;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-13" target="BtYslM8ire2YECF74fz1-14">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="532" y="1890" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-44" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5008608825015326;exitY=0.990792236328125;entryX=0.7264073204243429;entryY=0.008146117715274586;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-14" target="BtYslM8ire2YECF74fz1-15">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="532" y="1990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-45" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49939469159659694;exitY=0.990792236328125;entryX=0.35524958719682087;entryY=0.008146117715274586;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-4" target="BtYslM8ire2YECF74fz1-15">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="188" y="1990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-46" value="" style="curved=1;dashed=1;dashPattern=2 3;startArrow=none;endArrow=block;exitX=0.7919222329996588;exitY=0.9993636322021484;entryX=0.5025710816595964;entryY=-0.000935834996840533;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-13" target="BtYslM8ire2YECF74fz1-16">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="798" y="1890" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-47" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5025710816595964;exitY=0.9864591710707721;entryX=0.5016211237773359;entryY=-0.0018489485284889557;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-16" target="BtYslM8ire2YECF74fz1-17">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-48" value="10秒超时" style="curved=1;startArrow=none;endArrow=block;exitX=0.13413836441128454;exitY=0.998336363030246;entryX=0.5010112898022521;entryY=0.00238158486106179;rounded=0;fontColor=#009999;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-17" target="BtYslM8ire2YECF74fz1-18">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="681" y="2298" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-49" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5010112898022521;exitY=0.9958880453398733;entryX=0.49832173211233954;entryY=-0.0015507943289620536;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-18" target="BtYslM8ire2YECF74fz1-19">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-50" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=-0.0005696078709193638;exitY=0.955555192827812;entryX=0.4991921111270114;entryY=-0.0013331210974491005;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-19" target="BtYslM8ire2YECF74fz1-20">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="549" y="2657" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-51" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.9972130720955985;exitY=0.955555192827812;entryX=0.4980382575438573;entryY=-0.0010730464284012958;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-19" target="BtYslM8ire2YECF74fz1-21">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="814" y="2657" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-52" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4991921111270114;exitY=0.9921733393813624;entryX=0.1595228941759682;entryY=0.007324912331321023;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-20" target="BtYslM8ire2YECF74fz1-22">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="549" y="2797" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-53" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4980382575438573;exitY=0.9937005391935023;entryX=0.8423525887300266;entryY=0.007324912331321023;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-21" target="BtYslM8ire2YECF74fz1-22">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="814" y="2797" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-54" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.007048654800466507;exitY=1.0008313728101326;entryX=0.4996377490815662;entryY=-0.0007465824936375474;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-22" target="BtYslM8ire2YECF74fz1-23">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="459" y="2922" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-55" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.8101810283162262;exitY=1.0008313728101326;entryX=0.4995762016693456;entryY=-0.0013892163131316798;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-22" target="BtYslM8ire2YECF74fz1-24">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="820" y="2922" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-56" value="是 D 状态" style="curved=1;startArrow=none;endArrow=block;exitX=0.2534440911938997;exitY=0.9976925335852187;entryX=0.5011516974224308;entryY=-0.0006009543814310213;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-24" target="BtYslM8ire2YECF74fz1-25">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="737" y="3260" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-57" value="否" style="curved=1;startArrow=none;endArrow=block;exitX=0.7457083121447914;exitY=0.9976925335852187;entryX=0.9988782967978377;entryY=0.13875086182675284;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-24" target="BtYslM8ire2YECF74fz1-26">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="903" y="3260" />
              <mxPoint x="903" y="3401" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-58" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4996377490815662;exitY=0.992759877985174;entryX=-0.0036538558277657363;entryY=0.13875086182675284;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-23" target="BtYslM8ire2YECF74fz1-26">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="459" y="3401" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-59" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5011516974224308;exitY=0.9941726312404726;entryX=0.6807558349499664;entryY=-0.014054242302389705;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-25" target="BtYslM8ire2YECF74fz1-26">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="737" y="3401" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-60" value="进程已退出" style="curved=1;startArrow=none;endArrow=block;exitX=0.9068676186359663;exitY=0.998336363030246;entryX=0.5004985039246911;entryY=0.00238158486106179;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-17" target="BtYslM8ire2YECF74fz1-27">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="927" y="2298" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BtYslM8ire2YECF74fz1-61" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5004985039246911;exitY=0.9958880453398733;entryX=0.5007578880806279;entryY=0.007320011363309973;rounded=0;" edge="1" parent="1" source="BtYslM8ire2YECF74fz1-27" target="BtYslM8ire2YECF74fz1-28">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="ja08RMNNtzMEXlGkii8R" name="ResumeSandbox">
    <mxGraphModel dx="734" dy="539" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="MVeizuqXWsRAQvzQ8Bf2-6" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="1215" y="830" width="605" height="470" as="geometry" />
        </mxCell>
        <mxCell id="MVeizuqXWsRAQvzQ8Bf2-7" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="1444.5" y="1310" width="605" height="500" as="geometry" />
        </mxCell>
        <mxCell id="2huKnQUmpOMqPqQgYtuc-1" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="1720" y="1820" width="890" height="930" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-2" value="开始 ResumeSandbox&#xa;第349行" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1308" y="20" width="179" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-3" value="设置追踪 (358-360行)&#xa;ctx, span := tracer.Start&#xa;(ctx, &#39;resume sandbox&#39;)&#xa;defer handleSpanError(span, &amp;amp;e)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1254" y="120" width="288" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-4" value="创建执行 span (362行)&#xa;execCtx, execSpan :=&#xa;startExecutionSpan(ctx)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1304" y="251" width="187" height="66" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-5" value="初始化错误处理 (364行)&#xa;exit := utils.NewErrorOnce()" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1289" y="367" width="218" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-6" value="创建清理器 (366行)&#xa;cleanup := NewCleanup()&#xa;defer cleanup.Run on error" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1293" y="466" width="210" height="66" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-7" value="异步获取网络槽位 (376行)&#xa;ipsCh := getNetworkSlotAsync&#xa;(ctx, f.networkPool,&#xa;cleanup, config.Network)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1283" y="582" width="228" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-8" value="创建路径管理对象 (382-383行)&#xa;sandboxFiles := t.Files()&#xa;.NewSandboxFiles(runtime.SandboxID)&#xa;cleanup.Add(cleanupFiles(...))" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1252" y="713" width="292" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-9" value="获取只读 rootfs (387-390行)&#xa;readonlyRootfs, err := t.Rootfs()&#xa;telemetry: &#39;got template rootfs&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1250" y="845" width="290" height="66" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-10" value="返回错误&#xa;&#39;failed to get rootfs&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="20" y="4466" width="156" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-11" value="创建 rootfs overlay (394-401行)&#xa;rootfsOverlay, err :=&#xa;rootfs.NewNBDProvider(&#xa;  readonlyRootfs,&#xa;  sandboxFiles.SandboxCacheRootfsPath,(路径管理对象)&#xa;  f.devicePool)&#xa;cleanup.Add(rootfsOverlay.Close)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1372" y="979" width="318" height="130" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-12" value="返回错误&#xa;&#39;failed to create rootfs overlay&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="226" y="4466" width="236" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-13" value="启动 overlay goroutine (407-412行)&#xa;go func() {&#xa;  runErr := rootfsOverlay.Start(execCtx)&#xa;}&#xa;telemetry: &#39;created rootfs overlay&#39;" style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1504" y="1177" width="288" height="98" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-14" value="从模板中获取内存文件 (414-417行)&#xa;memfile, err := t.Memfile(ctx)&#xa;telemetry: &#39;got template memfile&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1518" y="1325" width="259" height="66" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-15" value="返回错误&#xa;&#39;failed to get memfile&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="512" y="4466" width="173" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-16" value="启动内存服务UUFD (421-432行)&#xa;fcUffdPath := sandboxFiles&#xa;.SandboxUffdSocketPath()&#xa;fcUffd, err := serveMemory(&#xa;  execCtx, cleanup, memfile,&#xa;  fcUffdPath, runtime.SandboxID)&#xa;telemetry: &#39;started serving memory&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1627" y="1459" width="271" height="130" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-17" value="返回错误&#xa;&#39;failed to serve memory&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="735" y="4466" width="187" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-18" value="监控 uffd 进程退出 (437-444行)&#xa;uffdStartCtx, cancelUffdStartCtx :=&#xa;context.WithCancelCause(ctx)&#xa;go func() {&#xa;  uffdWaitErr := fcUffd.Exit().Wait()&#xa;  cancelUffdStartCtx(...)&#xa;}()" style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1748" y="1657" width="270" height="130" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-19" value="获取 rootfs 路径 (446-449行)&#xa;rootfsPath, err :=&#xa;rootfsOverlay.Path()&#xa;telemetry: &#39;got rootfs path&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1773" y="1837" width="220" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-20" value="返回错误&#xa;&#39;failed to get rootfs path&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="972" y="4466" width="193" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-21" value="等待网络槽位 (453-456行)&#xa;ips := &amp;lt;-ipsCh&#xa;if ips.err != nil { return }&#xa;telemetry: &#39;got network slot&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1897" y="1987" width="219" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-22" value="返回错误&#xa;&#39;failed to get network slot&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1215" y="4466" width="203" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-23" value="获取元数据 (460-463行)&#xa;meta, err := t.Metadata()&#xa;telemetry: &#39;got metadata&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2029" y="2137" width="199" height="66" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-24" value="返回错误&#xa;&#39;failed to get metadata&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1468" y="4466" width="183" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-25" value="创建 Firecracker 进程 (467-487行)&#xa;fcHandle, fcErr := fc.NewProcess(&#xa;  ctx, execCtx, f.config,&#xa;  ips.slot, sandboxFiles,&#xa;  FirecrackerVersions{...},&#xa;  rootfsPath, RootfsPaths{...})&#xa;telemetry: &#39;created FC process&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2109" y="2271" width="259" height="130" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-26" value="返回错误&#xa;&#39;failed to create FC&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1701" y="4466" width="155" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-27" value="获取快照文件 (492-495行)&#xa;snapfile, err := t.Snapfile()&#xa;telemetry: &#39;got snapfile&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2240" y="2469" width="209" height="66" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-28" value="返回错误&#xa;&#39;failed to get snapfile&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1906" y="4466" width="170" height="50" as="geometry" />
        </mxCell>
        <UserObject label="恢复 Firecracker (499-513行)&#xa;fcStartErr := fcHandle.Resume(&#xa;  uffdStartCtx,&#xa;  sbxlogger.SandboxMetadata{...},&#xa;  fcUffdPath, snapfile,&#xa;  fcUffd.Ready(), ips.slot)&#xa;telemetry: &#39;initialized FC&#39;" link="data:page/id,9X568IIayHipo-6Ys714" id="IcipTwfmkwcGv1s3FtML-29">
          <mxCell style="whiteSpace=wrap;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
            <mxGeometry x="2324" y="2603" width="248" height="130" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="IcipTwfmkwcGv1s3FtML-30" value="返回错误&#xa;&#39;failed to start FC&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2126" y="4466" width="142" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-31" value="创建资源对象 (517-521行)&#xa;resources := &amp;amp;Resources{&#xa;  Slot: ips.slot,&#xa;  rootfs: rootfsOverlay,&#xa;  memory: fcUffd&#xa;}" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2453" y="2802" width="231" height="114" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-32" value="创建元数据对象 (523-533行)&#xa;metadata := &amp;amp;Metadata{&#xa;  internalConfig{...},&#xa;  Config: config,&#xa;  Runtime: runtime,&#xa;  StartedAt: startedAt,&#xa;  EndAt: endAt&#xa;}" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2455" y="2984" width="228" height="146" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-33" value="创建沙箱对象 (535-549行)&#xa;sbx := &amp;amp;Sandbox{&#xa;  Resources: resources,&#xa;  Metadata: metadata,&#xa;  Template: t,&#xa;  config: f.config,&#xa;  files: sandboxFiles,&#xa;  process: fcHandle,&#xa;  cleanup: cleanup,&#xa;  APIStoredConfig: apiConfigToStore,&#xa;  exit: exit&#xa;}" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2435" y="3179" width="267" height="210" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-34" value="获取指标特性标志 (551-554行)&#xa;useClickhouseMetrics, flagErr :=&#xa;f.featureFlags.BoolFlag(ctx,&#xa;featureflags.MetricsWriteFlagName)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2432" y="3457" width="274" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-35" value="创建健康检查 (558行)&#xa;sbx.Checks = NewChecks&#xa;(sbx, useClickhouseMetrics)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2463" y="3608" width="212" height="66" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-36" value="添加停止清理器 (560-563行)&#xa;cleanup.AddPriority(func(ctx) {&#xa;  return sbx.Stop(ctx)&#xa;})" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2450" y="3742" width="239" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-37" value="等待 envd 初始化 (567-573行)&#xa;err = sbx.WaitForEnvd(&#xa;  ctx, f.config.EnvdTimeout)&#xa;telemetry: &#39;waiting for envd&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2455" y="3873" width="228" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-38" value="返回错误&#xa;&#39;failed to wait for sandbox start&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2319" y="4466" width="244" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-39" value="上报事件 (575行)&#xa;telemetry: &#39;envd initialized&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2591" y="4023" width="212" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-40" value="启动健康检查 (577行)&#xa;go sbx.Checks.Start(execCtx)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2585" y="4123" width="225" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-41" value="启动监控 goroutine (579-596行)&#xa;go func() {&#xa;  defer execSpan.End()&#xa;  // 等待 uffd 或 fc 退出&#xa;  select {&#xa;    case &amp;lt;-fcUffd.Exit().Done():&#xa;    case &amp;lt;-fcHandle.Exit.Done():&#xa;  }&#xa;  err := sbx.Stop(ctx)&#xa;  exit.SetError(errors.Join(...))&#xa;}()" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2576" y="4223" width="242" height="194" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-42" value="返回沙箱对象 (598行)&#xa;return sbx, nil" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2613" y="4466" width="169" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-43" value="结束" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1410" y="4566" width="56" height="34" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-44" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5006238202142982;exitY=0.9914286041259766;entryX=0.4986516104804145;entryY=-0.005226460898794779;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-2" target="IcipTwfmkwcGv1s3FtML-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-45" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4986516104804145;exitY=0.9895471247231088;entryX=0.5005971327184994;entryY=0.0021646095044685135;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-3" target="IcipTwfmkwcGv1s3FtML-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-46" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5005971327184994;exitY=0.99567106998328;entryX=0.498218641368621;entryY=-0.005714187622070313;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-4" target="IcipTwfmkwcGv1s3FtML-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-47" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.498218641368621;exitY=0.9857144165039062;entryX=0.4981507800874256;entryY=0.004329103412050189;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-5" target="IcipTwfmkwcGv1s3FtML-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-48" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4981507800874256;exitY=0.9978355638908617;entryX=0.5026827360454359;entryY=-0.0017421071122332317;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-6" target="IcipTwfmkwcGv1s3FtML-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-49" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5026827360454359;exitY=0.9930314785096703;entryX=0.49867008156972387;entryY=0.005226600460889862;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-7" target="IcipTwfmkwcGv1s3FtML-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-50" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49867008156972387;exitY=1.0000001860827934;entryX=0.5024864382860137;entryY=2.3119377367424243e-7;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-8" target="IcipTwfmkwcGv1s3FtML-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-51" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.001494337872761052;exitY=0.5931217884631792;entryX=0.49977586208245695;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-9" target="IcipTwfmkwcGv1s3FtML-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="98" y="945" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-52" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7470365855861388;exitY=0.9935066916725852;entryX=0.5023065128841916;entryY=0.0010990142822265626;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-9" target="IcipTwfmkwcGv1s3FtML-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1521" y="945" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-53" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.0014945494162069786;exitY=0.595468432554594;entryX=0.5004540782863811;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-11" target="IcipTwfmkwcGv1s3FtML-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="344" y="1143" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-54" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7836328688595431;exitY=0.9978022942176232;entryX=0.5000854995515611;entryY=0.002915596475406569;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-11" target="IcipTwfmkwcGv1s3FtML-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1648" y="1143" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-55" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5000854995515611;exitY=0.9985425520916374;entryX=0.5020255747909251;entryY=-0.002164089318477746;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-13" target="IcipTwfmkwcGv1s3FtML-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-56" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.001129253490551098;exitY=0.6202410256173745;entryX=0.5016818184384032;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-14" target="IcipTwfmkwcGv1s3FtML-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="599" y="1425" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-57" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7189173078636767;exitY=0.9913423711603339;entryX=0.501640742115429;entryY=2.0540677584134617e-7;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-14" target="IcipTwfmkwcGv1s3FtML-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1763" y="1425" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-58" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.0009872605439921586;exitY=0.6090190419824396;entryX=0.5007004763353318;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-16" target="IcipTwfmkwcGv1s3FtML-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="829" y="1623" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-59" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7910913479705234;exitY=0.9967034853421725;entryX=0.4996227546974465;entryY=0.0010991023137019232;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-16" target="IcipTwfmkwcGv1s3FtML-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1883" y="1623" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-60" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4996227546974465;exitY=0.9978023822490986;entryX=0.4995370171286843;entryY=-0.0034840281416730185;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-18" target="IcipTwfmkwcGv1s3FtML-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-61" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=-0.0003953586925159801;exitY=0.6175482542927839;entryX=0.5001968620972312;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-19" target="IcipTwfmkwcGv1s3FtML-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1069" y="1953" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-62" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.8060529707635851;exitY=0.9912895574802305;entryX=0.5023667322446222;entryY=-0.0017417814673447028;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-19" target="IcipTwfmkwcGv1s3FtML-21" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2007" y="1953" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-63" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.0022579698257794664;exitY=0.6409127971908497;entryX=0.5013711111886161;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-21" target="IcipTwfmkwcGv1s3FtML-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1317" y="2103" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-64" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.8037573120339498;exitY=0.9930318041545588;entryX=0.500041578283262;entryY=5.779844341856061e-7;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-21" target="IcipTwfmkwcGv1s3FtML-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2129" y="2103" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-65" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.0005014122431002669;exitY=0.6743753703889744;entryX=0.5014112295348787;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-23" target="IcipTwfmkwcGv1s3FtML-24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1560" y="2237" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-66" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7687940081675046;exitY=0.9935070384632457;entryX=0.4977552936804341;entryY=0.0010991903451772836;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-23" target="IcipTwfmkwcGv1s3FtML-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2238" y="2237" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-67" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=-0.001762080836940456;exitY=0.7140961774192804;entryX=0.5005093482232863;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-25" target="IcipTwfmkwcGv1s3FtML-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1779" y="2435" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-68" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7661915903666702;exitY=0.9978024702805739;entryX=0.49874377821050764;entryY=0.004329565799597538;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-25" target="IcipTwfmkwcGv1s3FtML-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2344" y="2435" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-69" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=-0.001975392610832835;exitY=0.8023374580265102;entryX=0.5012741537655101;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-27" target="IcipTwfmkwcGv1s3FtML-28" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1991" y="2569" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-70" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.740067329212426;exitY=0.9978360262784091;entryX=0.4976542534366731;entryY=0.003296984159029447;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-27" target="IcipTwfmkwcGv1s3FtML-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2447" y="2569" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-71" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=-0.0019827350493400327;exitY=0.8796116323922328;entryX=0.5040719475544674;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-29" target="IcipTwfmkwcGv1s3FtML-30" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2198" y="2767" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-72" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.8183977029281481;exitY=1.000000264094426;entryX=0.5024194098138189;entryY=-0.0037590829949629935;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-29" target="IcipTwfmkwcGv1s3FtML-31" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2569" y="2767" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-73" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5024194098138189;exitY=0.9924816332365337;entryX=0.5002582616973341;entryY=-0.0019566000324406038;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-31" target="IcipTwfmkwcGv1s3FtML-32" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-74" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5002582616973341;exitY=0.9951080688058513;entryX=0.5020931972546524;entryY=0.0013608478364490327;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-32" target="IcipTwfmkwcGv1s3FtML-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-75" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5020931972546524;exitY=0.9993200211297898;entryX=0.500214903894132;entryY=0.005227251750666921;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-33" target="IcipTwfmkwcGv1s3FtML-34" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-76" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.500214903894132;exitY=1.0000008373725704;entryX=0.5002777531461896;entryY=-0.0064924413507634945;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-34" target="IcipTwfmkwcGv1s3FtML-35" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-77" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5002777531461896;exitY=0.9870140191280481;entryX=0.49815432496649453;entryY=-0.0034834698932926828;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-35" target="IcipTwfmkwcGv1s3FtML-36" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-78" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49815432496649453;exitY=0.9912901157286109;entryX=0.5002582616973341;entryY=0.0034852376798304116;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-36" target="IcipTwfmkwcGv1s3FtML-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-79" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.19477699802083456;exitY=0.998258823301734;entryX=0.4994240745169217;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-37" target="IcipTwfmkwcGv1s3FtML-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2441" y="3989" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-80" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.8057395253738338;exitY=0.998258823301734;entryX=0.5012183639238466;entryY=0.008573074340820313;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-37" target="IcipTwfmkwcGv1s3FtML-39" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2697" y="3989" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-81" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5012183639238466;exitY=1.0000016784667969;entryX=0.49892574734157985;entryY=0.000001678466796875;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-39" target="IcipTwfmkwcGv1s3FtML-40" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-82" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49892574734157985;exitY=0.9914302825927734;entryX=0.5010673270737829;entryY=-0.002208690053408908;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-40" target="IcipTwfmkwcGv1s3FtML-41" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-83" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5010673270737829;exitY=0.995582167635259;entryX=0.4985697819636418;entryY=0.0028588104248046873;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-41" target="IcipTwfmkwcGv1s3FtML-42" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-84" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4985697819636418;exitY=0.9942874145507813;entryX=1.001028231212071;entryY=0.4581695010544857;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-42" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2697" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-85" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49977586208245695;exitY=0.9942874145507813;entryX=0.008553743362426758;entryY=0.45981524527927403;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-10" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="98" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-86" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5004540782863811;exitY=0.9942874145507813;entryX=0.008553743362426758;entryY=0.4540829586494778;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-12" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="344" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-87" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5016818184384032;exitY=0.9942874145507813;entryX=0.008553743362426758;entryY=0.44461323400497244;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-15" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="599" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-88" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5007004763353318;exitY=0.9942874145507813;entryX=0.008553743362426758;entryY=0.42927513737044243;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-17" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="829" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-89" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5001968620972312;exitY=0.9942874145507813;entryX=0.008553743362426758;entryY=0.3929244477061836;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-20" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1069" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-90" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5013711111886161;exitY=0.9942874145507813;entryX=0.008553743362426758;entryY=0.2041804140368346;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-22" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1317" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-91" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5014112295348787;exitY=0.9942874145507813;entryX=1.001028231212071;entryY=0.2041804140368346;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-24" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1560" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-92" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5005093482232863;exitY=0.9942874145507813;entryX=1.001028231212071;entryY=0.38493892817672637;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-26" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1779" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-93" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5012741537655101;exitY=0.9942874145507813;entryX=1.001028231212071;entryY=0.42353173828913737;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-28" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1991" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-94" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5040719475544674;exitY=0.9942874145507813;entryX=1.001028231212071;entryY=0.44031790775183893;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-30" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2198" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-95" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4994240745169217;exitY=0.9942874145507813;entryX=1.001028231212071;entryY=0.45123211015465237;rounded=0;" parent="1" source="IcipTwfmkwcGv1s3FtML-38" target="IcipTwfmkwcGv1s3FtML-43" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2441" y="4541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-101" value="&lt;div style=&quot;background-color: rgb(24, 24, 24); line-height: 19px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal;&quot; color=&quot;#82d2ce&quot;&gt;//&amp;nbsp;&lt;/font&gt;&lt;font face=&quot;Consolas, Courier New, monospace&quot; color=&quot;#82d2ce&quot;&gt;packages\shared\pkg\storage\sandbox.go&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;func&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;font-style: italic;&quot;&gt;s &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SandboxFiles&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SandboxCacheRootfsPath&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;font-style: italic;&quot;&gt;config&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;BuilderConfig&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;string&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; {&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;filepath&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Join&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;config&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandboxCacheDir&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(), &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;fmt&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Sprintf&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e394dc;&quot;&gt;&quot;rootfs-%s-%s.cow&quot;&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;SandboxID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;randomID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;))&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;func&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;font-style: italic;&quot;&gt;s &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SandboxFiles&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SandboxFirecrackerSocketPath&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;() &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;string&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; {&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;filepath&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Join&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;tmpDir&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;fmt&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Sprintf&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e394dc;&quot;&gt;&quot;fc-%s-%s.sock&quot;&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;SandboxID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;randomID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;))&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;func&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;font-style: italic;&quot;&gt;s &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SandboxFiles&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SandboxUffdSocketPath&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;() &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;string&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; {&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;filepath&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Join&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;tmpDir&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;fmt&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Sprintf&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e394dc;&quot;&gt;&quot;uffd-%s-%s.sock&quot;&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;SandboxID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;randomID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;))&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;func&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;font-style: italic;&quot;&gt;s &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SandboxFiles&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;SandboxCacheRootfsLinkPath&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;font-style: italic;&quot;&gt;config&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;BuilderConfig&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;) &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;string&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; {&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #82d2ce;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;filepath&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Join&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;config&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;GetSandboxCacheDir&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(), &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;fmt&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #efb080;&quot;&gt;Sprintf&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #e394dc;&quot;&gt;&quot;rootfs-%s-%s.link&quot;&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;SandboxID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;s&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #d6d6dd;&quot;&gt;randomID&lt;/span&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;))&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; font-weight: normal; color: rgb(228, 228, 228);&quot;&gt;&lt;span style=&quot;color: #e4e4e4;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2040" y="491" width="1040" height="420" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-106" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shape=flexArrow;" parent="1" source="IcipTwfmkwcGv1s3FtML-103" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2030" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-103" value="&lt;span style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;并没有创建文件，只是标注了目录&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1550" y="740" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="IcipTwfmkwcGv1s3FtML-105" value="&lt;span style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;这是实际根文件系统镜像&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1561" y="871" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MVeizuqXWsRAQvzQ8Bf2-1" value="&lt;section id=&quot;markdown-section-3b58aa7b-ec26-4e3f-a1ab-86b46a6f2d40-10&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;1. **并行执行，提高性能**：获取网络槽位（`networkPool.Get`）可能需要一定时间，通过异步方式，可以让主流程继续执行其他初始化工作（比如准备文件系统、设备等），不必等待网络槽位分配完成。&quot; data-section-index=&quot;10&quot; style=&quot;border-radius: 4px; line-height: 19.5px; margin: 6px 0px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(51, 51, 51); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(242, 242, 242); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;ol style=&quot;margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;0&quot; value=&quot;1&quot; style=&quot;margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 0px; padding-top: 2px; padding-bottom: 2px; list-style-type: decimal;&quot;&gt;&lt;span class=&quot;markdown-bold-text&quot; style=&quot;font-weight: 600;&quot;&gt;&lt;span&gt;并行执行，提高性能&lt;/span&gt;&lt;/span&gt;&lt;span&gt;：获取网络槽位（&lt;/span&gt;&lt;span class=&quot;markdown-inline-code leading-[1.4]&quot; style=&quot;line-height: 1.4; background-color: color(srgb 0.747556 0.747556 0.747556 / 0.420392); border-radius: 4px; color: inherit; font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace, Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; font-size: 0.9em; padding: 1.5px 3px; transition: 0.1s; word-break: break-all; cursor: default;&quot;&gt;&lt;span&gt;networkPool.Get&lt;/span&gt;&lt;/span&gt;&lt;span&gt;）可能需要一定时间，通过异步方式，可以让主流程继续执行其他初始化工作（比如准备文件系统、设备等），不必等待网络槽位分配完成。&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section-3b58aa7b-ec26-4e3f-a1ab-86b46a6f2d40-11&quot; class=&quot;markdown-section&quot; data-markdown-raw=&quot;2. **延迟获取**：使用 channel 返回结果，只有在真正需要使用网络槽位时才会阻塞等待（通过 `&lt;-ipsCh`）。&quot; data-section-index=&quot;11&quot; style=&quot;border-radius: 4px; line-height: 19.5px; margin: 6px 0px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(51, 51, 51); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(242, 242, 242); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;ol style=&quot;margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;0&quot; value=&quot;2&quot; style=&quot;margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 0px; padding-top: 2px; padding-bottom: 2px; list-style-type: decimal;&quot;&gt;&lt;span class=&quot;markdown-bold-text&quot; style=&quot;font-weight: 600;&quot;&gt;&lt;span&gt;延迟获取&lt;/span&gt;&lt;/span&gt;&lt;span&gt;：使用 channel 返回结果，只有在真正需要使用网络槽位时才会阻塞等待（通过&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;markdown-inline-code leading-[1.4]&quot; style=&quot;line-height: 1.4; background-color: color(srgb 0.747556 0.747556 0.747556 / 0.420392); border-radius: 4px; color: inherit; font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace, Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; font-size: 0.9em; padding: 1.5px 3px; transition: 0.1s; word-break: break-all; cursor: default;&quot;&gt;&lt;span&gt;&amp;lt;-ipsCh&lt;/span&gt;&lt;/span&gt;&lt;span&gt;）。&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/section&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1544" y="535" width="406" height="100" as="geometry" />
        </mxCell>
        <mxCell id="MVeizuqXWsRAQvzQ8Bf2-3" value="&lt;div style=&quot;background-color: rgb(245, 245, 245); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#7a3e9d&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#7a3e9d&quot;&gt;// 新建uffd服务&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51);&quot;&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;fcUffd&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;err&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;:=&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;uffd&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #aa3731;font-weight: bold;&quot;&gt;New&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;memfile&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;socketPath&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;memfile&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #aa3731;font-weight: bold;&quot;&gt;BlockSize&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;())&lt;/span&gt;&lt;/div&gt;// 启动&lt;br&gt;&lt;div style=&quot;color: rgb(51, 51, 51);&quot;&gt;&lt;span style=&quot;color: #4b69c6;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;err&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;fcUffd&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #aa3731;font-weight: bold;&quot;&gt;Start&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;ctx&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;sandboxID&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;);&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;err&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;!=&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #9c5d27;&quot;&gt;nil&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51);&quot;&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #4b69c6;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #9c5d27;&quot;&gt;nil&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;fmt&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #aa3731;font-weight: bold;&quot;&gt;Errorf&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #448c27;&quot;&gt;failed to start uffd: &lt;/span&gt;&lt;span style=&quot;color: #9c5d27;&quot;&gt;%w&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;err&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51);&quot;&gt;&lt;span style=&quot;color: #777777;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1980" y="1391" width="560" height="230" as="geometry" />
        </mxCell>
        <mxCell id="MVeizuqXWsRAQvzQ8Bf2-4" value="&lt;section id=&quot;markdown-section-1a8a2129-aa8c-46f6-b596-99e568dddf9e-13&quot; class=&quot;markdown-section chat-fade-in&quot; data-markdown-raw=&quot;### 工作流程&quot; data-section-index=&quot;13&quot; style=&quot;border-radius: 4px; line-height: 19.5px; margin: 6px 0px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(51, 51, 51); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(242, 242, 242); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;h3 style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; font-weight: 600 !important; font-size: 1.15em; line-height: 1.25; margin-bottom: 8px; margin-top: 18px;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;工&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;作流程&lt;/span&gt;&lt;/h3&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section-1a8a2129-aa8c-46f6-b596-99e568dddf9e-14&quot; class=&quot;markdown-section chat-fade-in&quot; data-markdown-raw=&quot;1. **创建 Unix Socket**（第 67 行）&#xa;   - 创建一个 Unix socket，供 Firecracker 虚拟机连接&quot; data-section-index=&quot;14&quot; style=&quot;border-radius: 4px; line-height: 19.5px; margin: 6px 0px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(51, 51, 51); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(242, 242, 242); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;ol style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;0&quot; value=&quot;1&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 0px; padding-top: 2px; padding-bottom: 2px; list-style-type: decimal;&quot;&gt;&lt;span class=&quot;markdown-bold-text&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; font-weight: 600;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;创&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;建 Unix Socket&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;（第 6&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;7 行&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;）&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;3&quot; class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 24px; padding-top: 2px; padding-bottom: 2px; list-style-type: disc;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;创&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;建一个 Unix socket，供&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;Firecracker&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;虚拟机连&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;接&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section-1a8a2129-aa8c-46f6-b596-99e568dddf9e-15&quot; class=&quot;markdown-section chat-fade-in&quot; data-markdown-raw=&quot;2. **接收 uffd 文件描述符**（第 112-142 行）&#xa;   - Firecracker 通过 socket 发送 userfaultfd 文件描述符和内存区域映射信息&#xa;   - 使用 `syscall.ParseUnixRights` 接收文件描述符&quot; data-section-index=&quot;15&quot; style=&quot;border-radius: 4px; line-height: 19.5px; margin: 6px 0px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(51, 51, 51); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(242, 242, 242); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;ol style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;0&quot; value=&quot;2&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 0px; padding-top: 2px; padding-bottom: 2px; list-style-type: decimal;&quot;&gt;&lt;span class=&quot;markdown-bold-text&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; font-weight: 600;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;接&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;收&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;uffd 文&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;件描述符&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;（第&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;112&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;-14&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;2 行）&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;3&quot; class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 24px; padding-top: 2px; padding-bottom: 2px; list-style-type: disc;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;Firecracker 通&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;过 socket&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;发&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;送 us&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;erfaultfd 文件描述&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;符和内&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;存区&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;域映&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;射信&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;息&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ul class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;3&quot; class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 24px; padding-top: 2px; padding-bottom: 2px; list-style-type: disc;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;使&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;用&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;markdown-inline-code leading-[1.4]&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; line-height: 1.4; background-color: color(srgb 0.747556 0.747556 0.747556 / 0.420392); border-radius: 4px; color: inherit; font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace, Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; font-size: 0.9em; padding: 1.5px 3px; transition: 0.1s; word-break: break-all; cursor: default;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;syscall.ParseUn&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;ixRights&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;接收文&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;件描述符&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;&lt;section id=&quot;markdown-section-1a8a2129-aa8c-46f6-b596-99e568dddf9e-16&quot; class=&quot;markdown-section chat-fade-in&quot; data-markdown-raw=&quot;3. **监听页面错误事件**（第 167 行的 `uffd.Serve()`）&#xa;   - 当虚拟机访问未加载的内存页时，通过 userfaultfd 接收通知&#xa;   - 从 memfile 中读取相应的内存页数据&#xa;   - 将数据提供给虚拟机&quot; data-section-index=&quot;16&quot; style=&quot;border-radius: 4px; line-height: 19.5px; margin: 6px 0px; position: relative; scroll-margin-bottom: 40px; scroll-margin-top: 40px; color: rgb(51, 51, 51); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(242, 242, 242); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;ol style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;0&quot; value=&quot;3&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 0px; padding-top: 2px; padding-bottom: 2px; list-style-type: decimal;&quot;&gt;&lt;span class=&quot;markdown-bold-text&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; font-weight: 600;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;监&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;听页&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;面错误事&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;件&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;（第 16&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;7&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;行的&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;markdown-inline-code leading-[1.4]&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; line-height: 1.4; background-color: color(srgb 0.747556 0.747556 0.747556 / 0.420392); border-radius: 4px; color: inherit; font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace, Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; font-size: 0.9em; padding: 1.5px 3px; transition: 0.1s; word-break: break-all; cursor: default;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;uffd.Serve(&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;）&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;3&quot; class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 24px; padding-top: 2px; padding-bottom: 2px; list-style-type: disc;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;当&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;虚拟机访&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;问未加载的内存页&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;时，通过 us&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;erfaultfd 接&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;收通&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;知&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ul class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;3&quot; class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 24px; padding-top: 2px; padding-bottom: 2px; list-style-type: disc;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;从&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;mem&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;file 中&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;读取相&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;应&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;的内存页&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;数&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;据&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ul class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;3&quot; class=&quot;nested&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 24px; padding-top: 2px; padding-bottom: 2px; list-style-type: disc;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;将数据提&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;供&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;给虚拟机&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2510" y="1311" width="490" height="310" as="geometry" />
        </mxCell>
        <mxCell id="2huKnQUmpOMqPqQgYtuc-2" value="&lt;div style=&quot;color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaaaaa;font-style: italic;&quot;&gt;// (Checks is) Part of the sandbox as we need to stop Checks before pausing the sandbox&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaaaaa;font-style: italic;&quot;&gt;// This is to prevent race condition of reporting unhealthy sandbox&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2710" y="3600" width="560" height="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="_Jz8frYx7n2cufgQZQvT" name="NewNBDProvider">
    <mxGraphModel dx="734" dy="1708" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-2" value="开始 NewNBDProvider&#xa;第33行" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="494" y="300" width="184" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-3" value="获取设备大小 (34-37行)&#xa;size, err := rootfs.Size()" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="493" y="400" width="187" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-4" value="返回错误&#xa;&#39;error getting device size&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="250" y="834" width="195" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-5" value="获取块大小 (39行)&#xa;blockSize := rootfs.BlockSize()" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="585" y="518" width="233" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-6" value="创建缓存层 (41-44行)&#xa;cache, err := block.NewCache(&#xa;  size,&#xa;  blockSize,&#xa;  cachePath,&#xa;  false)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="583" y="636" width="237" height="114" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-7" value="返回错误&#xa;&#39;error creating cache&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="495" y="834" width="166" height="50" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-8" value="创建 Overlay 层 (46行)&#xa;overlay := block.NewOverlay(&#xa;  rootfs,&#xa;  cache)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="712" y="818" width="227" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-9" value="创建 NBD 挂载 (48行)&#xa;mnt := nbd.NewDirectPathMount(&#xa;  overlay,&#xa;  devicePool)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="697" y="950" width="255" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-10" value="构建 NBDProvider 对象 (50-57行)&#xa;return &amp;amp;NBDProvider{&#xa;  mnt: mnt,&#xa;  overlay: overlay,&#xa;  ready: utils.NewSetOnce[string](),&#xa;  finishedOperations: make(chan, 1),&#xa;  blockSize: blockSize,&#xa;  devicePool: devicePool&#xa;}" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="690" y="1081" width="269" height="162" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-11" value="返回 Provider" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="765" y="1293" width="120" height="34" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-12" value="返回 nil, error" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="400" y="974" width="125" height="34" as="geometry" />
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-13" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5017227089923361;exitY=0.9914286041259766;entryX=0.49902127515823447;entryY=-0.008571395874023438;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-2" target="IbAQwe1ixkgx_1u0Tx2y-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-14" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=-0.0006644509055397727;exitY=0.949706922265637;entryX=0.5008203751001603;entryY=4.9591064453125e-7;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-3" target="IbAQwe1ixkgx_1u0Tx2y-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="348" y="483" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-15" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7579921402183828;exitY=0.9828572082519531;entryX=0.5010027905902126;entryY=-0.005714187622070313;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-3" target="IbAQwe1ixkgx_1u0Tx2y-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="702" y="483" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-16" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5010027905902126;exitY=0.9857144165039062;entryX=0.5009858658545128;entryY=-0.0012530611272443806;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-5" target="IbAQwe1ixkgx_1u0Tx2y-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-17" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.17674968302594846;exitY=0.9949876551042524;entryX=0.5029717870505459;entryY=4.9591064453125e-7;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-6" target="IbAQwe1ixkgx_1u0Tx2y-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="578" y="784" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-18" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.8252220486830771;exitY=0.9949876551042524;entryX=0.4976827478618874;entryY=2.791241901676829e-7;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-6" target="IbAQwe1ixkgx_1u0Tx2y-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="825" y="784" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-19" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4976827478618874;exitY=0.9947738647460938;entryX=0.5018587598613664;entryY=-0.00522613525390625;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-8" target="IbAQwe1ixkgx_1u0Tx2y-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-20" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5018587598613664;exitY=0.9895474503679973;entryX=0.5017620214299199;entryY=0.0008820427788628472;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-9" target="IbAQwe1ixkgx_1u0Tx2y-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-21" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5017620214299199;exitY=0.9982366208676938;entryX=0.499783198038737;entryY=-0.008401982924517463;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-10" target="IbAQwe1ixkgx_1u0Tx2y-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-22" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5008203751001603;exitY=0.9914291000366211;entryX=0.26901777972803803;entryY=-0.012604152455049403;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-4" target="IbAQwe1ixkgx_1u0Tx2y-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="348" y="925" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="IbAQwe1ixkgx_1u0Tx2y-23" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5029717870505459;exitY=0.9914291000366211;entryX=0.740208538631337;entryY=-0.012604152455049403;rounded=0;" parent="1" source="IbAQwe1ixkgx_1u0Tx2y-7" target="IbAQwe1ixkgx_1u0Tx2y-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="578" y="925" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-1" value="NBD Provider 架构" style="whiteSpace=wrap;strokeWidth=2;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="299" y="-90" width="660" height="251" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-2" value="DirectPathMount&#xa;NBD 挂载层" style="whiteSpace=wrap;strokeWidth=2;" parent="lQ8bc_8aALyexlH6Q7Tz-1" vertex="1">
          <mxGeometry x="187" y="109" width="134" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-3" value="NBDProvider&#xa;顶层接口" style="whiteSpace=wrap;strokeWidth=2;" parent="lQ8bc_8aALyexlH6Q7Tz-1" vertex="1">
          <mxGeometry x="33" y="109" width="104" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-4" value="Overlay&#xa;写时复制层" style="whiteSpace=wrap;strokeWidth=2;" parent="lQ8bc_8aALyexlH6Q7Tz-1" vertex="1">
          <mxGeometry x="371" y="109" width="95" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-5" value="ReadonlyDevice&#xa;只读 rootfs&#xa;来自模板" style="whiteSpace=wrap;strokeWidth=2;" parent="lQ8bc_8aALyexlH6Q7Tz-1" vertex="1">
          <mxGeometry x="516" y="43" width="127" height="66" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-6" value="Cache&#xa;可写缓存层&#xa;存储变更" style="whiteSpace=wrap;strokeWidth=2;" parent="lQ8bc_8aALyexlH6Q7Tz-1" vertex="1">
          <mxGeometry x="532" y="159" width="95" height="66" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-7" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.9974612456101638;exitY=0.4914285278320312;entryX=-0.0019703765413654384;entryY=0.4914285278320312;rounded=0;" parent="lQ8bc_8aALyexlH6Q7Tz-1" source="lQ8bc_8aALyexlH6Q7Tz-3" target="lQ8bc_8aALyexlH6Q7Tz-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-8" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.9978853481919018;exitY=0.4914285278320312;entryX=-0.0029827720240542762;entryY=0.4914285278320312;rounded=0;" parent="lQ8bc_8aALyexlH6Q7Tz-1" source="lQ8bc_8aALyexlH6Q7Tz-2" target="lQ8bc_8aALyexlH6Q7Tz-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-9" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.8256436657890917;exitY=-0.004285774230957031;entryX=-0.0008814053272637795;entryY=0.49675323023940576;rounded=0;" parent="lQ8bc_8aALyexlH6Q7Tz-1" source="lQ8bc_8aALyexlH6Q7Tz-4" target="lQ8bc_8aALyexlH6Q7Tz-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="491" y="76" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-10" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.8256436657890917;exitY=0.9871428298950196;entryX=-0.0010153519479851973;entryY=0.49025969071821734;rounded=0;" parent="lQ8bc_8aALyexlH6Q7Tz-1" source="lQ8bc_8aALyexlH6Q7Tz-4" target="lQ8bc_8aALyexlH6Q7Tz-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="491" y="191" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-12" value="&lt;div style=&quot;color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #4b69c6;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;font-weight: bold;&quot;&gt;DirectPathMount&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;Backend&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;:&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;b&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;blockSize&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;:&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #9c5d27;&quot;&gt;4096&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;devicePool&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;:&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;devicePool&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;socksClient&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;:&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #aa3731;font-weight: bold;&quot;&gt;make&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;([]*&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;font-weight: bold;&quot;&gt;os&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;font-weight: bold;&quot;&gt;File&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #9c5d27;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;socksServer&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;:&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #aa3731;font-weight: bold;&quot;&gt;make&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;([]&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;font-weight: bold;&quot;&gt;io&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;font-weight: bold;&quot;&gt;Closer&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #9c5d27;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;),&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;deviceIndex&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;:&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;math&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;MaxUint32&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="994" y="920" width="360" height="180" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-13" value="&lt;div style=&quot;color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #4b69c6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;connections&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #9c5d27;&quot;&gt;4&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;connectTimeout&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #9c5d27;&quot;&gt;30&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;time&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;Second&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #aaaaaa;font-style: italic;&quot;&gt;// disconnectTimeout should not be necessary if the disconnect is reliable&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #333333;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;disconnectTimeout&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #9c5d27;&quot;&gt;30&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;*&lt;/span&gt;&lt;span style=&quot;color: #333333;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;time&lt;/span&gt;&lt;span style=&quot;color: #777777;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #7a3e9d;&quot;&gt;Second&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #777777;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1354" y="920" width="560" height="180" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-14" value="开始 NewCache&#xa;第48行" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1520" y="1169" width="139" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-15" value="函数参数:&#xa;size, blockSize int64&#xa;filePath string&#xa;dirtyFile bool" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1509" y="1269" width="161" height="82" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-16" value="打开/创建文件 (49-52行)&#xa;f, err := os.OpenFile(filePath,&#xa;os.O_RDWR | os.O_CREATE, 0o644)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1456" y="1400" width="267" height="66" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-17" value="返回错误 (51行)&#xa;&#39;error opening file&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1110" y="2337" width="146" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-18" value="延迟关闭文件 (54行)&#xa;defer f.Close()" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1611" y="1534" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-19" value="截断文件创建稀疏文件 (57-60行)&#xa;err = f.Truncate(size)&#xa;&#xa;💡 在 Linux 上会创建稀疏文件&#xa;只在实际写入时分配磁盘空间" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1568" y="1634" width="247" height="82" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-20" value="返回错误 (59行)&#xa;&#39;error allocating file&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1306" y="2337" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-21" value="检查大小 (62-64行)&#xa;if size &amp;gt; math.MaxInt" style="rhombus;strokeWidth=2;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1669" y="1784" width="238" height="238" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-22" value="返回错误 (63行)&#xa;&#39;size too big:&#xa;%d &amp;gt; %d&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1516" y="2329" width="128" height="66" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-23" value="内存映射文件 (66-69行)&#xa;mm, err := mmap.MapRegion(&#xa;  f, int(size),&#xa;  unix.PROT_READ | unix.PROT_WRITE,&#xa;  0, 0)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1750" y="2091" width="286" height="130" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-24" value="返回错误 (68行)&#xa;&#39;error mapping file&#39;" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1705" y="2337" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-25" value="创建 Cache 对象 (71-77行)&#xa;return &amp;amp;Cache{&#xa;  mmap: &amp;amp;mm,&#xa;  filePath: filePath,&#xa;  size: size,&#xa;  blockSize: blockSize,&#xa;  dirtyFile: dirtyFile&#xa;}, nil" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1905" y="2289" width="204" height="146" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-26" value="返回 Cache 对象" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1510" y="2485" width="141" height="34" as="geometry" />
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-27" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5023527076776079;exitY=0.9914286041259766;entryX=0.5020312196719721;entryY=-0.005226460898794779;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-14" target="lQ8bc_8aALyexlH6Q7Tz-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-28" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5020312196719721;exitY=0.9895471247231088;entryX=0.5012248178546348;entryY=0.0021646095044685135;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-15" target="lQ8bc_8aALyexlH6Q7Tz-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-29" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.000915470194727294;exitY=0.8325627181961416;entryX=0.49968405945660316;entryY=0.0008636093139648437;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-16" target="lQ8bc_8aALyexlH6Q7Tz-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1183" y="1500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-30" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.6870236514942923;exitY=0.99567106998328;entryX=0.50195791721344;entryY=0.00571441650390625;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-16" target="lQ8bc_8aALyexlH6Q7Tz-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1691" y="1500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-31" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.50195791721344;exitY=0.9971430206298828;entryX=0.49924399495607447;entryY=-0.0017420605915348705;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-18" target="lQ8bc_8aALyexlH6Q7Tz-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-32" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=-0.0006385370787338689;exitY=0.865792675287182;entryX=0.4995397090911865;entryY=0.0008636093139648437;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-19" target="lQ8bc_8aALyexlH6Q7Tz-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1386" y="1750" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-33" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7127972046171908;exitY=0.9930315250303687;entryX=0.5016898467761128;entryY=6.411255908613445e-8;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-19" target="lQ8bc_8aALyexlH6Q7Tz-21" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1788" y="1750" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-34" value="超过限制" style="curved=1;startArrow=none;endArrow=block;exitX=0.000998937783121061;exitY=0.8695427964287987;entryX=0.5008139610290527;entryY=0.000654278379498106;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-21" target="lQ8bc_8aALyexlH6Q7Tz-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1580" y="2057" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-35" value="未超过" style="curved=1;startArrow=none;endArrow=block;exitX=0.8446817026809079;exitY=1.0013818820985425;entryX=0.5018224916258058;entryY=-0.0007667834942157452;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-21" target="lQ8bc_8aALyexlH6Q7Tz-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1894" y="2057" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-36" value="失败" style="curved=1;startArrow=none;endArrow=block;exitX=0.24206869131155417;exitY=0.9959364964411809;entryX=0.49944211324055987;entryY=0.0008636093139648437;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-23" target="lQ8bc_8aALyexlH6Q7Tz-24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1780" y="2255" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-37" value="成功" style="curved=1;startArrow=none;endArrow=block;exitX=0.7615762919400575;exitY=0.9959364964411809;entryX=0.5006183736464557;entryY=0.00029571742227632705;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-23" target="lQ8bc_8aALyexlH6Q7Tz-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2007" y="2255" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-38" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5006183736464557;exitY=0.9973603862605683;entryX=0.9956363109832115;entryY=0.28009162824651623;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-25" target="lQ8bc_8aALyexlH6Q7Tz-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2007" y="2460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-39" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49968405945660316;exitY=0.9922922134399415;entryX=-0.001250679611314273;entryY=0.264877817390497;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-17" target="lQ8bc_8aALyexlH6Q7Tz-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1183" y="2460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-40" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4995397090911865;exitY=0.9922922134399415;entryX=-0.001250679611314273;entryY=0.0375426806360993;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-20" target="lQ8bc_8aALyexlH6Q7Tz-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1386" y="2460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-41" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5008139610290527;exitY=0.9941607388583097;entryX=0.4971928156859486;entryY=-0.011334811939912684;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-22" target="lQ8bc_8aALyexlH6Q7Tz-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-42" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49944211324055987;exitY=0.9922922134399415;entryX=0.9956363109832115;entryY=0.05008570188090289;rounded=0;" parent="1" source="lQ8bc_8aALyexlH6Q7Tz-24" target="lQ8bc_8aALyexlH6Q7Tz-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1780" y="2460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lQ8bc_8aALyexlH6Q7Tz-46" value="将文件映射到进程内存空间&#xa;可以像访问内存一样访问文件&#xa;访问性能高" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="2068" y="2120" width="230" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="9X568IIayHipo-6Ys714" name="Resume">
    <mxGraphModel dx="-1747" dy="-2968" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-1" value="开始 Resume 方法" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2659" y="4260" width="152" height="34" as="geometry" />
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-2" value="配置 FC 进程&#xa;p.configure(ctx, sbxMetadata, nil, nil)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2590" y="4344" width="290" height="50" as="geometry" />
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-3" value="创建 rootfs 符号链接&#xa;utils.SymlinkForce(&#xa;  providerRootfsPath,&#xa;  SandboxCacheRootfsLinkPath)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2620" y="4443" width="229" height="82" as="geometry" />
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-4" value="调fc的api加载快照&#xa;p.client.loadSnapshot(&#xa;  ctx, uffdSocketPath,&#xa;  uffdReady, snapfile)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2646" y="4575" width="178" height="82" as="geometry" />
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-5" value="调fc的api恢复虚拟机&#xa;p.client.resumeVM(ctx)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2643" y="4706" width="184" height="50" as="geometry" />
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-6" value="创建 MMDS 元数据&#xa;MmdsMetadata{&#xa;  SandboxID,&#xa;  TemplateID,&#xa;  LogsCollectorAddress&#xa;}" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2651" y="4806" width="167" height="114" as="geometry" />
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-7" value="调fc的api设置 MMDS&#xa;p.client.setMmds(ctx, meta)" style="whiteSpace=wrap;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2625" y="4969" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-8" value="完成" style="rounded=1;whiteSpace=wrap;arcSize=50;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="2707" y="5069" width="56" height="34" as="geometry" />
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-9" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49877628527189555;exitY=0.9873950060676125;entryX=0.49935860469423493;entryY=-0.008571395874023438;rounded=0;" parent="1" source="pzdAJzQXA7ciuL_IMTTT-1" target="pzdAJzQXA7ciuL_IMTTT-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-10" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49935860469423493;exitY=0.9828572082519531;entryX=0.5013711587830922;entryY=0.0017422001536299542;rounded=0;" parent="1" source="pzdAJzQXA7ciuL_IMTTT-2" target="pzdAJzQXA7ciuL_IMTTT-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-11" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5013711587830922;exitY=0.9965157857755336;entryX=0.49895503011982095;entryY=-0.0034842142244664634;rounded=0;" parent="1" source="pzdAJzQXA7ciuL_IMTTT-3" target="pzdAJzQXA7ciuL_IMTTT-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-12" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.49895503011982095;exitY=0.9912893713974371;entryX=0.4989891052246094;entryY=0.005714569091796875;rounded=0;" parent="1" source="pzdAJzQXA7ciuL_IMTTT-4" target="pzdAJzQXA7ciuL_IMTTT-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-13" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4989891052246094;exitY=0.9971431732177735;entryX=0.5018802117444798;entryY=-0.0012529942027309485;rounded=0;" parent="1" source="pzdAJzQXA7ciuL_IMTTT-5" target="pzdAJzQXA7ciuL_IMTTT-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-14" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5018802117444798;exitY=0.9949877220287657;entryX=0.4991545243696733;entryY=0.008572006225585937;rounded=0;" parent="1" source="pzdAJzQXA7ciuL_IMTTT-6" target="pzdAJzQXA7ciuL_IMTTT-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pzdAJzQXA7ciuL_IMTTT-15" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.4991545243696733;exitY=1.0000006103515624;entryX=0.4966784885951451;entryY=8.975758272058823e-7;rounded=0;" parent="1" source="pzdAJzQXA7ciuL_IMTTT-7" target="pzdAJzQXA7ciuL_IMTTT-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x6scLLoarIF5CYAnHOVa-1" value="&lt;ul style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin: 0px 0px 0px 16px; color: rgb(51, 51, 51); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(242, 242, 242); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;0&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 0px; padding-top: 2px; padding-bottom: 2px; list-style-type: disc;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;NB&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;D 设备的&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;挂载点是&lt;/span&gt;&lt;span class=&quot;markdown-bold-text&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; font-weight: 600;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;动态的&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;（可&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;能是&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;markdown-inline-code leading-[1.4]&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; line-height: 1.4; background-color: color(srgb 0.747556 0.747556 0.747556 / 0.420392); border-radius: 4px; color: inherit; font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace, Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; font-size: 0.9em; padding: 1.5px 3px; transition: 0.1s; word-break: break-all; cursor: default;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;/dev/nbd0&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;、&lt;/span&gt;&lt;span class=&quot;markdown-inline-code leading-[1.4]&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; line-height: 1.4; background-color: color(srgb 0.747556 0.747556 0.747556 / 0.420392); border-radius: 4px; color: inherit; font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace, Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; font-size: 0.9em; padding: 1.5px 3px; transition: 0.1s; word-break: break-all; cursor: default;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;/dev/nbd1&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;等）&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ul style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; color: rgb(51, 51, 51); font-family: &amp;quot;Segoe WPC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, sans-serif; font-size: 13px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(242, 242, 242); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; margin: 0px 0px 0px 16px; padding: 0px;&quot;&gt;&lt;li data-indent=&quot;0&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; margin-bottom: 2px !important; margin-top: 2px !important; margin-left: 0px; padding-top: 2px; padding-bottom: 2px; list-style-type: disc;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;Firecracker 需要一个&lt;/span&gt;&lt;span class=&quot;markdown-bold-text&quot; style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in; font-weight: 600;&quot;&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;稳定的路&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;径&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;animation: 0.25s ease 0s 1 normal none running fade-in;&quot;&gt;来引用 rootfs&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2868" y="4460" width="440" height="70" as="geometry" />
        </mxCell>
        <mxCell id="x6scLLoarIF5CYAnHOVa-2" value="# 在沙箱虚拟机内部执行&#xa;curl http://169.254.169.254/latest/meta-data/&#xa;&#xa;&#xa;# 会返回类似这样的数据：&#xa;{&#xa;  &quot;instanceID&quot;: &quot;sandbox-123&quot;,&#xa;  &quot;envID&quot;: &quot;python-template&quot;,&#xa;  &quot;address&quot;: &quot;http://169.254.169.2/logs&quot;&#xa;}" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="3070" y="4840" width="270" height="170" as="geometry" />
        </mxCell>
        <mxCell id="x6scLLoarIF5CYAnHOVa-3" value="1. vm内部用户应用或envd可以获得当前vm的信息&lt;br&gt;&lt;br&gt;2. vm启动时无需传递参数，直接从MMDS获取参数" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="2870" y="4860" width="160" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
